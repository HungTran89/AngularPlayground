<div class="p-4 border rounded-md shadow-md">
  <h2 class="text-xl font-semibold mb-4">Component 1</h2>

  <div class="mb-4">
    <button class="bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded mr-2 cursor-pointer" (click)="addGroup()">
      Add New Group
    </button>
    <button class="bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded cursor-pointer" (click)="addControlInGroup(1)">
      Add New Control
    </button>
  </div>

  <div *ngFor="let group of groups; let i = index" class="mb-6 border border-red-500 rounded-md p-4">
    <div class="flex items-center mb-2">
      <label for="groupName_{{i}}" class="mr-2 font-semibold">Group Name</label>
      <input type="text" id="groupName_{{i}}" class="shadow appearance-none border rounded w-auto py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" [(ngModel)]="group.name">
      <button class="bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded ml-2 cursor-pointer" (click)="deleteGroup(i)">
        Delete Group
      </button>
    </div>

    <div *ngFor="let control of group.controls; let j = index" class="flex items-center mb-2">
      <label for="nameLabel_{{i}}_{{j}}" class="mr-2 font-semibold">Name/Label</label>
      <input type="text" id="nameLabel_{{i}}_{{j}}" class="shadow appearance-none border rounded w-1/4 py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" [(ngModel)]="control.nameLabel">

      <label for="controlType_{{i}}_{{j}}" class="ml-4 mr-2 font-semibold">Control Type</label>
      <select id="controlType_{{i}}_{{j}}" class="shadow appearance-none border rounded w-1/4 py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" [(ngModel)]="control.controlType">
        <option value="" disabled selected>Select Type</option>
        <option value="text">Text</option>
        <option value="number">Number</option>
        <option value="dropdown">Dropdown</option>
        </select>

      <label for="defaultPlaceholder_{{i}}_{{j}}" class="ml-4 mr-2 font-semibold">Default/Placeholder</label>
      <input type="text" id="defaultPlaceholder_{{i}}_{{j}}" class="shadow appearance-none border rounded w-1/4 py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" [(ngModel)]="control.defaultPlaceholder">

      <button class="bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded ml-4 cursor-pointer" (click)="addValidations(i, j)">
        Add Validations
      </button>
      <button class="bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded ml-2 cursor-pointer" (click)="deleteControl(i, j)">
        Delete Control
      </button>
    </div>
    <button class="bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded mt-2 cursor-pointer" (click)="addControlInGroup(i)">
      Add Control
    </button>
  </div>
</div>
<br/><br/><br/>

<div class="isolate bg-white px-6 py-24 sm:py-32 lg:px-8">

    <div class="mx-auto max-w-2xl text-center">
        <h2 class="text-4xl font-semibold tracking-tight text-balance text-gray-900 sm:text-5xl">{{formTitle}}</h2>
        <p class="mt-2 text-lg/8 text-gray-600">{{subHeader}}</p>
    </div>
    <form [formGroup]="form" class="mx-auto mt-16 max-w-xl sm:mt-20">
        <div class="grid grid-cols-1 gap-x-8 gap-y-6 sm:grid-cols-2">
            @for (key of getControls(form); track key) {
            <ng-container [formGroup]="form">
                @if (isFormGroup(form.get(key))) {
                <fieldset [formGroupName]="key">
                    <div  class="block text-sm/6 font-semibold text-gray-900">{{ key }}</div>
                    @for (childKey of getControls(form.get(key)); track childKey) {
                    <ng-container>

                        <label for="first-name" class="block text-sm/6 font-semibold text-gray-900">{{ childKey }}</label>
                        <input [formControlName]="childKey" class="block w-full rounded-md bg-white px-3.5 py-2 text-base text-gray-900 outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600" />
                    </ng-container>

                    }
                </fieldset>
                } @else {
                <label for="{{key}}" class="block text-sm/6 font-semibold text-gray-900">{{ key }}</label>
                <input [formControlName]="key"  class="block w-full rounded-md bg-white px-3.5 py-2 text-base text-gray-900 outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600"/>
                }
            </ng-container>
            }
        </div>
    </form>
</div>